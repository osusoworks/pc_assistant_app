# SENPAI シンプル版 - PC操作ガイド

## 🎯 概要

**SENPAI シンプル版**は、添付画像のデザインに準じたミニマルで洗練されたUIと、影なしクリーン矢印を特徴とするPC操作ガイドアプリケーションです。

### ✨ 主な特徴

- **🎨 シンプルUI**: 添付画像に準じたミニマルデザイン
- **🏹 クリーン矢印**: 影なし、改善された三角形先端
- **📚 お気に入り機能**: 質問・回答の保存・検索
- **🤖 AI解析**: OpenAI GPT-4による高精度解析
- **📷 UI非表示撮影**: 純粋なPC画面キャプチャ
- **🎤 音声認識**: 音声による質問入力対応

---

## 🚀 クイックスタート

### 1. 実行

```bash
python run_simple_clean.py
```

### 2. 基本操作

1. **質問入力**: テキストエリアに質問を入力
2. **質問実行**: 「質問する」ボタンをクリック
3. **AI解析**: 自動でスクリーンショット撮影→AI解析
4. **矢印表示**: 操作箇所にクリーン矢印が表示
5. **お気に入り保存**: 有用な回答を保存・管理

### 3. キーボードショートカット

- `Ctrl+Enter`: 質問実行
- `Escape`: クリア
- `Ctrl+Q`: 終了

---

## 📋 システム要件

### 必須環境

- **Python**: 3.8以上
- **OS**: Windows 10/11, macOS 10.14+, Ubuntu 18.04+
- **メモリ**: 4GB以上推奨
- **ディスク**: 100MB以上の空き容量

### 必須パッケージ

```bash
# 標準ライブラリ（追加インストール不要）
tkinter, threading, time, os, json, datetime, math
```

### オプションパッケージ

```bash
# AI機能用
pip install openai

# 画像処理用
pip install Pillow

# HTTP通信用
pip install requests
```

---

## 🔧 設定

### OpenAI APIキー設定

AI機能を使用するには、OpenAI APIキーの設定が必要です。

#### Windows
```cmd
set OPENAI_API_KEY=your_api_key_here
```

#### Linux/Mac
```bash
export OPENAI_API_KEY=your_api_key_here
```

### 作業ディレクトリ

アプリケーションは以下のディレクトリを使用します：

```
~/SENPAI/                          # メイン作業ディレクトリ
├── favorites/                     # お気に入りファイル
│   ├── favorite_20241029_*.json
│   └── ...
├── favorites_index.json           # インデックスファイル
└── error_log.txt                  # エラーログ（エラー時のみ）

/tmp/pc_assistant_screenshots/     # スクリーンショット保存
├── screenshot_*.png
└── ...
```

---

## 🎨 UIデザイン仕様

### カラーパレット

```
背景色: #FFFFFF (純白)
テキスト: #000000 (純黒)
境界線: #CCCCCC (ライトグレー)
ボタン背景: #F5F5F5 (オフホワイト)
プレースホルダー: #999999 (ミディアムグレー)
```

### レイアウト

```
┌─────────────────────────────────────────┐
│ SENPAI                          - □ ×  │ ← タイトルバー
├─────────────────────────────────────────┤
│ ┌─────────────────────────────────────┐ │
│ │ 質問を入力してください              │ │ ← 質問入力エリア
│ │                                     │ │
│ └─────────────────────────────────────┘ │
│                    [入力モード切替] [質問する] │ ← ボタンエリア
│ ┌─────────────────────────────────────┐ │
│ │ 考え中...                          │ │ ← 回答表示エリア
│ │                                     │ │
│ └─────────────────────────────────────┘ │
│                         [終了] [クリア]    │ ← アクションボタン
└─────────────────────────────────────────┘
```

---

## 🏹 矢印オーバーレイ仕様

### 改善点

1. **影の完全除去**: 不要な影効果を削除
2. **先端の改善**: 三角形の形状とサイズを最適化
3. **クリーンな描画**: アンチエイリアス対応

### 技術仕様

```python
# 矢印デザイン
線幅: 3px
色: #FF4444 (鮮やかな赤)
全長: 60px
軸線: 40px
三角形部分: 20px
三角形幅: 16px

# 描画設定
影: なし
アンチエイリアス: 有効
自動非表示: 10秒後
```

---

## 📚 お気に入り機能

### 保存機能

- **タグ付け**: 分類用のタグを設定
- **自動保存**: 質問・回答・スクリーンショットを保存
- **タイムスタンプ**: 保存日時を記録

### 検索機能

- **全文検索**: 質問内容での検索
- **タグ検索**: タグでの絞り込み
- **リアルタイム**: 入力と同時に結果更新

### データ形式

```json
{
  "id": "favorite_20241029_123456",
  "question": "ユーザーの質問",
  "answer": "AIの回答",
  "tag": "分類タグ",
  "timestamp": "2024-10-29T12:34:56",
  "screenshot_path": "/path/to/screenshot.png"
}
```

---

## 🔧 ファイル構成

### コアファイル

```
run_simple_clean.py              # 実行ファイル（メイン）
main_controller_simple.py        # メインコントローラー
ui_module_simple.py              # シンプルUIモジュール
overlay_module_clean.py          # クリーン矢印オーバーレイ
```

### 既存モジュール（継承）

```
capture_module_ui_aware.py       # UI非表示キャプチャ
ai_module_improved.py            # AI解析（座標精度改善版）
speech_module.py                 # 音声認識
simple_library.py                # ライブラリ管理
library_ui_improved.py           # 改善版ライブラリUI
```

### ドキュメント

```
README_SIMPLE_CLEAN.md           # このファイル
SIMPLE_UI_DESIGN_SPEC.md         # UI設計仕様書
```

---

## 🧪 テスト・デバッグ

### 単体テスト

```bash
# UIモジュールテスト（GUI環境必須）
python ui_module_simple.py

# 矢印オーバーレイテスト（GUI環境必須）
python overlay_module_clean.py

# インポートテスト
python -c "from main_controller_simple import SimpleMainController; print('OK')"
```

### デバッグモード

コンソール出力で詳細なログを確認できます：

```
=== 質問受信: 検索はどこでやりますか ===
ライブラリから回答を検索中...
ライブラリに回答がないため、AI解析を実行します
UI非表示でスクリーンショット撮影中...
スクリーンショット撮影完了: /tmp/pc_assistant_screenshots/screenshot_*.png
AI解析中...
クリーン矢印表示試行: 座標(100, 200)
✅ クリーン矢印を表示しました（影なし、改善された先端）
```

---

## 🚨 トラブルシューティング

### よくある問題

#### 1. GUI環境エラー
```
_tkinter.TclError: no display name and no $DISPLAY environment variable
```
**解決**: GUI環境（デスクトップ）で実行してください

#### 2. APIキー未設定
```
⚠️ OpenAI APIキー: 未設定
```
**解決**: 環境変数 `OPENAI_API_KEY` を設定してください

#### 3. 矢印が表示されない
**確認事項**:
- AI解析が正常完了しているか
- 座標情報が取得できているか
- オーバーレイウィンドウが作成されているか

#### 4. お気に入り保存エラー
**確認事項**:
- `~/SENPAI` ディレクトリの書き込み権限
- ディスク容量の確認

### ログファイル

エラー発生時は以下にログが保存されます：
```
~/SENPAI/error_log.txt
```

---

## 🔄 アップデート履歴

### v1.0.0 (2024-10-29)
- 初回リリース
- シンプルUI実装
- クリーン矢印オーバーレイ実装
- お気に入り機能統合

---

## 📞 サポート

### 問題報告

バグや改善要望は以下の情報と共にご報告ください：

1. **環境情報**: OS、Pythonバージョン
2. **エラーメッセージ**: 完全なエラーログ
3. **再現手順**: 問題が発生する操作手順
4. **期待する動作**: 本来の期待される動作

### 開発者向け

- **アーキテクチャ**: モジュラー設計
- **拡張性**: 新機能の追加が容易
- **互換性**: 既存モジュールとの完全互換

---

## 📄 ライセンス

このプロジェクトは開発・学習目的で作成されています。

---

**SENPAI シンプル版で、より効率的なPC操作を体験してください！**
