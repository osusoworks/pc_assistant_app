# SENPAI - PC操作ガイド（シンプルライブラリ機能付き）

## 概要

安定版SENPAIにシンプルで安全なお気に入り機能を追加したバージョンです。複雑な実装を避け、最小限の変更で確実に動作するライブラリ機能を提供します。

## 🌟 新機能

### シンプルライブラリ機能
- **⭐ お気に入り保存**: AI回答を簡単にお気に入りに保存
- **📚 お気に入り一覧**: 保存済み回答を一覧表示・管理
- **🏷️ タグ付け**: 分類用のタグで整理
- **🔍 検索機能**: 質問・タグでの簡単検索
- **🗑️ 削除機能**: 不要なお気に入りを削除

### 既存機能（継承）
- **📷 UI非表示スクリーンショット**: 純粋なPC画面を撮影
- **🤖 AI解析**: OpenAI GPT-4による高精度解析
- **🎯 座標精度改善**: 信頼度評価システム
- **🏹 矢印オーバーレイ**: 操作箇所を視覚的に表示

## 📁 ファイル構成

### 新規追加ファイル
- `simple_library.py` - シンプルライブラリ管理クラス
- `library_ui.py` - お気に入り一覧ウィンドウ
- `main_controller_with_simple_library.py` - ライブラリ機能統合版メインコントローラー
- `run_simple_library.py` - シンプルライブラリ版実行ファイル

### 修正ファイル
- `ui_module_hide_aware.py` - ライブラリボタン追加

### 既存ファイル（変更なし）
- `capture_module_ui_aware.py` - UI非表示対応キャプチャ
- `ai_module_improved.py` - 改良版AI解析
- `overlay_module_improved.py` - 改良版オーバーレイ
- `speech_module.py` - 音声認識モジュール

## 🚀 使用方法

### 起動
```bash
python run_simple_library.py
```

### 基本操作
1. **質問入力**: テキストボックスに質問を入力
2. **AI解析**: 「🚀 質問する」ボタンでAI解析実行
3. **お気に入り保存**: 有用な回答で「⭐ お気に入り保存」ボタンをクリック
4. **タグ入力**: 分類用のタグを入力（例: ボタンクリック、ファイル操作）
5. **一覧表示**: 「📚 お気に入り一覧」ボタンで保存済み回答を管理

### お気に入り管理
- **検索**: 質問内容やタグで検索
- **詳細表示**: 一覧から選択して詳細を確認
- **削除**: 不要なお気に入りを削除
- **更新**: 最新の状態に更新

## 💾 データ保存

### 保存場所
```
~/SENPAI/
├── favorites/                  # お気に入りファイル
│   ├── favorite_20251029_*.json
│   └── ...
└── favorites_index.json       # インデックスファイル
```

### ファイル形式
```json
{
  "id": "favorite_20251029_013810",
  "question": "この青いボタンをクリックしたいです",
  "answer": "画面上の青いボタンをクリックするには...",
  "tag": "ボタンクリック",
  "created_at": "2025-10-29T01:38:10.843006",
  "screenshot_path": "/path/to/screenshot.png"
}
```

## 🔧 技術仕様

### 設計原則
- **シンプル性**: 複雑な実装を避け、理解しやすいコード
- **安全性**: 既存機能を壊さない最小限の変更
- **拡張性**: 将来の機能追加に対応可能な構造
- **互換性**: 既存の安定版との完全互換性

### 依存関係
```
tkinter (標準ライブラリ)
json (標準ライブラリ)
datetime (標準ライブラリ)
os (標準ライブラリ)
```

### エラーハンドリング
- 各処理段階での例外処理
- ユーザーフレンドリーなエラーメッセージ
- ログ出力による問題の追跡

## 🧪 テスト

### 単体テスト
```bash
# ライブラリ機能テスト
python simple_library.py

# UI機能テスト
python library_ui.py
```

### 統合テスト
```bash
# アプリケーション起動テスト
python run_simple_library.py
```

## 🔄 アップグレード手順

### 既存版からの移行
1. 既存のSENPAIを停止
2. 新しいファイルを配置
3. `run_simple_library.py`で起動
4. 既存のスクリーンショットやデータはそのまま利用可能

### データ移行
- 既存のお気に入りデータは自動的に読み込まれます
- 手動でのデータ移行は不要

## 🐛 トラブルシューティング

### よくある問題

#### お気に入りボタンが無効
- **原因**: 質問または回答が不足
- **解決**: 質問を送信してAI回答を取得後に有効化

#### お気に入り一覧が空
- **原因**: まだお気に入りが保存されていない
- **解決**: AI回答後に「⭐ お気に入り保存」で保存

#### 検索結果が表示されない
- **原因**: 検索キーワードが一致しない
- **解決**: 質問内容やタグの一部で検索

### ログ確認
```bash
# コンソール出力でエラー詳細を確認
python run_simple_library.py
```

## 📈 今後の拡張予定

### 短期的改善
- お気に入りのエクスポート/インポート機能
- タグの自動提案機能
- お気に入りの並び替え機能

### 長期的改善
- クラウド同期機能
- お気に入りの共有機能
- 使用頻度による自動整理

## 🤝 サポート

### 問題報告
- コンソール出力のエラーログを含めて報告
- 再現手順の詳細を記載

### 機能要望
- 具体的な使用場面を含めて要望
- 既存機能への影響を考慮

---

**SENPAI - PC操作の頼れる先輩として、あなたの作業をサポートします！**
